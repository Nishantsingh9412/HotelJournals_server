"use strict";(self.webpackChunkhotel_journals=self.webpackChunkhotel_journals||[]).push([[506],{7506:function(e,r,n){n.r(r);var t=n(4165),s=n(5861),c=n(9439),a=n(2791),o=n(9434),i=n(7689),l=n(6108),u=n(5039),d=n.n(u),p=n(2564),f=(n(5462),n(6157)),x=(n(3074),n(203)),m=n(6856),h=n(8044),v=n(184);r.default=function(){var e,r,n=(0,i.UO)().id,u=(0,a.useState)(null),j=(0,c.Z)(u,2),b=j[0],g=j[1],k=(0,a.useState)(""),w=(0,c.Z)(k,2),y=w[0],Z=w[1],C=(0,a.useState)(!1),A=(0,c.Z)(C,2),F=A[0],N=A[1],z=(0,o.I0)();(0,a.useEffect)((function(){z((0,h.HH)(n))}),[z,n]);var D=(0,o.v9)((function(e){return e.CVsettergetterReducer})),R=null===D||void 0===D||null===(e=D.data)||void 0===e||null===(r=e.result)||void 0===r?void 0:r.cv_db;console.log(R);var H=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),b){e.next=3;break}return e.abrupt("return",p.Am.error("Please select a file to upload"));case 3:if("application/pdf"===b.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===b.type||"application/msword"===b.type){e.next=5;break}return e.abrupt("return",p.Am.error("File type should be pdf or docx or doc only"));case 5:if(!(b.size>2e6)){e.next=7;break}return e.abrupt("return",p.Am.error("File size should not exceed 2MB"));case 7:N(!0),console.log(b),(s=new FormData).append("cv",b),z((0,h.co)(n,s)).then((function(e){e.success&&z((0,h.HH)(n)).then((function(r){r.success?p.Am.success(e.message):p.Am.error("Refresh Page to see changes ")}))})).finally((function(){N(!1)}));case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),S=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var s,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),b){e.next=3;break}return e.abrupt("return",p.Am.error("Please select a file to upload"));case 3:if("application/pdf"===b.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===b.type||"application/msword"===b.type){e.next=5;break}return e.abrupt("return",p.Am.error("File type should be pdf or docx or doc only"));case 5:if(!(b.size>2e6)){e.next=7;break}return e.abrupt("return",p.Am.error("File size should not exceed 2MB"));case 7:return N(!0),console.log(b),(s=new FormData).append("cv",b),e.next=13,z((0,h.Dj)(n,s));case 13:if(!(c=e.sent).success){e.next=21;break}return e.next=17,z((0,h.HH)(n));case 17:e.sent.success?p.Am.success(c.message):p.Am.error("Refresh Page to see changes "),e.next=22;break;case 21:p.Am.error(c.message);case 22:N(!1);case 23:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),V=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),N(!0),z((0,h.lX)(n)).then((function(e){e.success?(Z(""),p.Am.success(e.message)):p.Am.error(e.message),N(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),E=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r,n){var s,c,a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://hoteljournals-server.onrender.com/").concat(r));case 3:return s=e.sent,e.next=6,s.blob();case 6:c=e.sent,a=window.URL.createObjectURL(c),(o=document.createElement("a")).href=a,o.setAttribute("download",n),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){R&&Z(null===R||void 0===R?void 0:R.split("Z")[1])}),[R]),(0,v.jsxs)("div",{id:"resumescroll",className:"mb-4",children:[(0,v.jsx)(p.Ix,{}),R?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{class:"card mt-3 p-4",style:{boxShadow:"14px 10px 20px 3px #d3beae",borderRadius:"25px 25px 25px 25px"},children:(0,v.jsxs)("form",{children:[(0,v.jsx)("div",{className:"col-md-6 ",children:(0,v.jsx)("h5",{children:"Editar CV"})}),(0,v.jsxs)("div",{className:"row mb-4 p-4",children:[(0,v.jsx)("p",{children:y}),(0,v.jsxs)("div",{className:"col-md-2 d-flex",children:[(0,v.jsx)("div",{style:{cursor:"pointer"},onClick:function(){E(R,null===R||void 0===R?void 0:R.split("Z")[1])},children:(0,v.jsx)(l.h,{marginLeft:"10px",marginRight:"10px","aria-label":"Download CV",icon:(0,v.jsx)(x.aBF,{size:"20",color:"#4c9df4"})})}),(0,v.jsx)("div",{style:{cursor:"pointer"},onClick:V,children:(0,v.jsx)(l.h,{"aria-label":"Delete CV",icon:(0,v.jsx)(m.ZkW,{size:"20",color:"red"})})})]})]}),(0,v.jsx)("input",{type:"file",onChange:function(e){return g(e.target.files[0])}}),(0,v.jsx)(f.Z,{onClick:S,children:F?(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"d-flex ",children:[(0,v.jsx)(d(),{size:25,color:"#ffffff"})," ",(0,v.jsx)("span",{className:"pl-2",children:" "})]})}):"Actualizar CV "})]})})}):(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"mt-2",style:{boxShadow:"14px 10px 20px 3px #d3beae",borderRadius:"25px 25px 25px 25px",padding:"2rem"},children:[(0,v.jsx)("h5",{children:"Subir CV"}),(0,v.jsxs)("form",{children:[(0,v.jsx)("input",{type:"file",onChange:function(e){return g(e.target.files[0])}}),(0,v.jsx)(f.Z,{onClick:H,children:F?(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)(d(),{size:25,color:"#ffffff"})," ",(0,v.jsx)("span",{className:"pl-2",children:" "})]})}):"Guardar"})]})]})})]})}}}]);
//# sourceMappingURL=506.1250893f.chunk.js.map